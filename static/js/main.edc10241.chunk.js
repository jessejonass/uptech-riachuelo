(this.webpackJsonpuptech=this.webpackJsonpuptech||[]).push([[0],{33:function(e,t,n){},36:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(24),r=n.n(s),o=(n(32),n(19)),i=(n(33),n(4)),l=n(7),u=n.n(l),j=n(11),b=n(6),d=n(13),h=n(22),f=n(16),O=n(2),v=Object(c.createContext)(null),m=function(e){var t=e.children,n=Object(c.useState)([]),s=Object(b.a)(n,2),r=s[0],o=s[1];Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("@books+:favorites");e&&o(Object(f.a)(JSON.parse(e)))}()}),[]);var i=Object(c.useCallback)((function(e){var t=r.filter((function(t){return t.id!==e.id}));o(t),localStorage.setItem("@books+:favorites",JSON.stringify(t))}),[r]),l=Object(c.useCallback)((function(e){r.find((function(t){return t.id===e.id}))?i(e):(localStorage.setItem("@books+:favorites",JSON.stringify([].concat(Object(f.a)(r),[Object(h.a)({},e)]))),o([].concat(Object(f.a)(r),[Object(h.a)({},e)])))}),[r,i]),u=Object(c.useCallback)((function(){o([]),localStorage.setItem("@books+:favorites","")}),[]),j=a.a.useMemo((function(){return{favorites:r,addFavorite:l,removeFavorite:i,clearFavorites:u}}),[r,l,i,u]);return Object(O.jsx)(v.Provider,{value:j,children:t})};function x(){var e=Object(c.useContext)(v);if(!e)throw new Error("useFavorite must be used within FavoriteProvider");return e}n(36);var p=function(e){var t,n,a=e.id,s=e.selfLink,r=e.volumeInfo,o=e.favorite,i=Object(c.useState)(!1),l=Object(b.a)(i,2),h=l[0],f=l[1],v=x().addFavorite,m=Object(c.useCallback)((function(e){v(e),f(!h)}),[v,h]);return Object(O.jsxs)("div",{className:"card__container",children:[Object(O.jsx)("div",{className:"image__card",children:(null===r||void 0===r||null===(t=r.imageLinks)||void 0===t?void 0:t.thumbnail)?Object(O.jsx)("img",{src:null===r||void 0===r||null===(n=r.imageLinks)||void 0===n?void 0:n.thumbnail,alt:null===r||void 0===r?void 0:r.title}):Object(O.jsx)("img",{src:"https://via.placeholder.com/128x184",alt:"Placeholder"})}),Object(O.jsxs)("div",{className:"info__card",children:[Object(O.jsxs)("div",{className:"card__header",children:[Object(O.jsx)("strong",{children:null===r||void 0===r?void 0:r.title}),Object(O.jsx)("span",{children:null===r||void 0===r?void 0:r.subtitle}),Object(O.jsxs)("span",{children:["Lan\xe7amento:"," ",Object(O.jsx)("strong",{children:new Date(null===r||void 0===r?void 0:r.publishedDate).toLocaleDateString()})]})]}),Object(O.jsxs)("div",{className:"card__footer",children:[Object(O.jsx)("a",{href:"/details/".concat(a),children:"Ver detalhes"}),Object(O.jsx)("button",{type:"button",onClick:Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m({id:a,selfLink:s,volumeInfo:r});case 1:case"end":return e.stop()}}),e)}))),children:h||o?Object(O.jsx)(d.a,{color:"#c53030",size:20}):Object(O.jsx)(d.b,{size:20})})]})]})]})},g=n(25),k=n.n(g),_=Object(c.createContext)(null),w=function(e){var t=e.children,n=Object(c.useState)([]),s=Object(b.a)(n,2),r=s[0],o=s[1],i=Object(c.useState)(!1),l=Object(b.a)(i,2),d=l[0],h=l[1],f=Object(c.useState)(0),v=Object(b.a)(f,2),m=v[0],x=v[1],p=Object(c.useState)(0),g=Object(b.a)(p,2),k=g[0],w=g[1],N=Object(c.useState)(""),S=Object(b.a)(N,2),I=S[0],C=S[1],y=Object(c.useState)(!1),P=Object(b.a)(y,2),L=P[0],F=P[1],B=Object(c.useState)(!1),D=Object(b.a)(B,2),E=D[0],J=D[1];Object(c.useEffect)((function(){F(m<10),r&&Object.keys(r).length<10?J(!0):J(!1)}),[m,r,k]);var q=Object(c.useCallback)(function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(t),x(0),h(!0),e.next=5,fetch("https://www.googleapis.com/books/v1/volumes?q=search+".concat(t,"&startIndex=0")).then((function(e){return e.json()})).then((function(e){w(e.totalItems),o(e.items),h(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),M=Object(c.useCallback)(Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=m+10,x(m+10),e.next=5,fetch("https://www.googleapis.com/books/v1/volumes?q=search+".concat(I,"&startIndex=").concat(t)).then((function(e){return e.json()})).then((function(e){o(e.items),h(!1)}));case 5:case"end":return e.stop()}}),e)}))),[m,I]),V=Object(c.useCallback)(Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),t=m-10,m>=0&&x(m-10),e.next=5,fetch("https://www.googleapis.com/books/v1/volumes?q=search+".concat(I,"&startIndex=").concat(t)).then((function(e){return e.json()})).then((function(e){o(e.items),h(!1)}));case 5:case"end":return e.stop()}}),e)}))),[m,I]),z=a.a.useMemo((function(){return{searchBooks:q,books:r,loading:d,totalItems:k,nextPage:M,prevPage:V,disablePrevPage:L,disableNextPage:E}}),[q,r,d,k,M,V,L,E]);return Object(O.jsx)(_.Provider,{value:z,children:t})};function N(){var e=Object(c.useContext)(_);if(!e)throw new Error("useSearch must be used within SearchProvider");return e}n(57);var S=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],s=N(),r=s.searchBooks,o=s.loading,i=Object(c.useCallback)((function(e){r(e)}),[r]);return Object(O.jsxs)("div",{className:"search__container",children:[Object(O.jsxs)("h1",{children:["Ol\xe1. Bem vindx ao ",Object(O.jsx)("br",{})," Books+"]}),Object(O.jsx)("p",{children:"Fa\xe7a uma busca por nossa biblioteca, encontre e salve seus livros favoritos :)"}),Object(O.jsxs)("form",{className:"search__input",onSubmit:function(e){e.preventDefault(),i(n)},children:[Object(O.jsx)("input",{type:"text",placeholder:"Busque um livro",onChange:function(e){return a(e.target.value)}}),Object(O.jsx)("button",{type:"button",onClick:function(){return i(n)},children:o?Object(O.jsx)(k.a,{type:"ThreeDots",color:"#e5e5e5",height:30,width:30}):Object(O.jsx)(d.c,{})})]}),Object(O.jsxs)("a",{href:"/favorites",className:"search__favorites",children:[Object(O.jsx)("span",{children:"Ver meus favoritos"}),Object(O.jsx)(d.a,{})]})]})},I=(n(58),n(59),function(){var e=N(),t=e.nextPage,n=e.prevPage,c=e.disablePrevPage,a=e.disableNextPage;return Object(O.jsxs)("div",{className:"pagination__container",children:[Object(O.jsx)("button",{disabled:c,type:"button",onClick:function(){return n()},className:"prev__button",children:Object(O.jsx)("strong",{children:"Anterior"})}),Object(O.jsx)("button",{disabled:a,type:"button",onClick:function(){return t()},className:"next__button",children:Object(O.jsx)("strong",{children:"Pr\xf3ximo"})})]})}),C=n.p+"static/media/note.58245734.svg",y=n.p+"static/media/search.ddc801c9.svg",P=function(){var e,t,n=N().books,c=x().favorites;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(S,{}),n&&0===(null===(e=Object.keys(n))||void 0===e?void 0:e.length)&&Object(O.jsxs)("div",{className:"home__empty",children:[Object(O.jsx)("img",{src:C,alt:"Busca"}),Object(O.jsx)("strong",{children:"Fa\xe7a uma busca por autor, livro ou palavra chave"})]}),Object(O.jsx)("div",{className:"home__container",children:n&&n.map((function(e){return Object(O.jsx)(p,{id:e.id,volumeInfo:e.volumeInfo,selfLink:e.selfLink,favorite:!!c.find((function(t){return t.id===e.id}))},e.id)}))}),!n&&Object(O.jsxs)("div",{className:"home__not-found",children:[Object(O.jsx)("strong",{children:"N\xe3o foram encontrados registros"}),Object(O.jsx)("img",{src:y,alt:"Busca"})]}),n&&(null===(t=Object.keys(n))||void 0===t?void 0:t.length)>0&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(I,{})})]})},L=n(26),F=(n(60),function(){return Object(O.jsxs)("a",{href:"/",className:"back__container",children:[Object(O.jsx)("div",{children:Object(O.jsx)(L.a,{color:"#e5e5e5"})}),Object(O.jsx)("span",{children:"Voltar para o menu"})]})}),B=(n(61),function(e){var t=e.match,n=Object(c.useState)({}),a=Object(b.a)(n,2),s=a[0],r=a[1],o=t.params.id;return Object(c.useEffect)((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes/".concat(o)).then((function(e){return e.json()})).then((function(e){r(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o]),Object(O.jsxs)("div",{className:"details__container",children:[Object(O.jsx)(F,{}),s&&0===Object.keys(s).length?Object(O.jsx)("span",{children:"Carregando..."}):Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"details__header",children:[Object(O.jsx)("h2",{children:s.volumeInfo.title}),Object(O.jsx)("img",{src:s.volumeInfo.imageLinks.thumbnail,alt:s.volumeInfo.title}),Object(O.jsxs)("span",{children:["Lan\xe7ado em:"," ",new Date(s.volumeInfo.publishedDate).toLocaleDateString()]}),Object(O.jsx)("strong",{children:s.volumeInfo.subtitle}),Object(O.jsx)("span",{className:"detasil__header-subtitle",children:s.volumeInfo.description})]})})]})}),D=(n(62),function(){var e=x().favorites;return Object(O.jsxs)("div",{className:"favorites__container",children:[Object(O.jsx)(F,{}),Object(O.jsx)("h2",{children:"Essa \xe9 sua lista de livros favoritos"}),Object(O.jsx)("div",{className:"favorites__list",children:e.map((function(e){return Object(O.jsx)(p,{id:e.id,volumeInfo:e.volumeInfo,selfLink:e.selfLink,favorite:!0},e.id)}))})]})}),E=function(){return Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{exact:!0,path:"/",component:P}),Object(O.jsx)(i.a,{path:"/details/:id",component:B}),Object(O.jsx)(i.a,{path:"/favorites",component:D})]})},J=function(e){var t=e.children;return Object(O.jsx)(m,{children:Object(O.jsx)(w,{children:t})})},q=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(o.a,{children:Object(O.jsx)(J,{children:Object(O.jsx)(E,{})})})})};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(q,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.edc10241.chunk.js.map